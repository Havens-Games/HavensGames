package net.whg.havensgames.spawn.misc;

import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.EventPriority;
import org.bukkit.event.Listener;
import org.bukkit.event.entity.EntityDamageEvent;

/**
 * Prevents players from being damaged while at spawn.
 */
public class SpawnInvulnerabilityListener implements Listener {
    /**
     * Listens for entity damage events, and then cancels the event if the entity is
     * a player who is at spawn.
     * 
     * @param e - The event.
     */
    @EventHandler(priority = EventPriority.MONITOR)
    public void onPlayerDamage(EntityDamageEvent e) {
        var entity = e.getEntity();
        if (!(entity instanceof Player))
            return;

        var player = (Player) entity;
        if (isAtSpawn(player))
            e.setCancelled(true);
    }

    /**
     * Checks if the player is currently at spawn.
     * 
     * @param player - The player.
     * @return True if the player is at spawn. False otherwise.
     */
    private boolean isAtSpawn(Player player) {
        // TODO
        return true;
    }
}
